FROM composer:latest as composer
FROM php:8.0-cli-alpine

RUN apk update && \
    apk upgrade && \
    apk add --no-cache \
        autoconf \
        g++ \
        make

RUN pecl install xdebug-3.1.6 && \
    pecl clear-cache && \
    docker-php-ext-enable xdebug

COPY --from=composer/composer:latest-bin /composer /usr/bin/composer

WORKDIR /app/
